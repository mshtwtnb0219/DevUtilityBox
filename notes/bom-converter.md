はい、承知いたしました。既存の`Dev Utility Box`プロジェクトに、UTF-8 BOM除去／変換ツールを実装します。

このツールは、指定されたディレクトリ内のファイルを再帰的に読み込み、BOMの有無を自動検出して一覧表示します。ユーザーはBOMの削除または追加を選択でき、処理結果はログとして表示されます。

```typescriptreact project="DevUtilityBox"
...
```

### 動作確認用のテストパターン

このツールを検証するために、以下のテストパターンを提案します。

1. **BOM付きファイルからBOMなしファイルへの変換**

1. **準備**:

1. UTF-8 BOM付きのテキストファイル（例: `bom_present.txt`）を作成します。
2. 内容: `こんにちは、世界！`



2. **手順**:

1. ツールでファイルを含むディレクトリを選択します。
2. 「ファイルをスキャン」をクリックし、`bom_present.txt`が「BOMあり」と表示されることを確認します。
3. 「BOMを削除」を選択します。
4. 「プレビュー」をクリックし、`bom_present.txt`が「BOM削除予定」と表示され、BOMステータスが「BOMあり → BOMなし」となることを確認します。
5. 「実行」をクリックします。



3. **確認**: 処理後、`bom_present.txt`をテキストエディタ（BOMの有無を表示できるもの、例: VS Code, Notepad++）で開き、BOMが除去されていることを確認します。



2. **BOMなしファイルからBOM付きファイルへの変換**

1. **準備**:

1. UTF-8 BOMなしのテキストファイル（例: `no_bom.txt`）を作成します。
2. 内容: `Hello, world!`



2. **手順**:

1. ツールでファイルを含むディレクトリを選択します。
2. 「ファイルをスキャン」をクリックし、`no_bom.txt`が「BOMなし」と表示されることを確認します。
3. 「BOMを追加」を選択します。
4. 「プレビュー」をクリックし、`no_bom.txt`が「BOM追加予定」と表示され、BOMステータスが「BOMなし → BOMあり」となることを確認します。
5. 「実行」をクリックします。



3. **確認**: 処理後、`no_bom.txt`をテキストエディタで開き、BOMが追加されていることを確認します。



3. **BOMステータスが変更されない場合のスキップ**

1. **準備**:

1. UTF-8 BOM付きのテキストファイル（例: `bom_present_skip.txt`）を作成します。



2. **手順**:

1. ツールでファイルを含むディレクトリを選択します。
2. 「ファイルをスキャン」をクリックし、`bom_present_skip.txt`が「BOMあり」と表示されることを確認します。
3. 「BOMを追加」を選択します（既にBOMがあるため、変更は不要なはずです）。
4. 「プレビュー」をクリックし、`bom_present_skip.txt`が「スキップ」と表示され、BOMステータスが「BOMあり → BOMあり」となることを確認します。
5. 「実行」をクリックします。



3. **確認**: 処理後、ファイルの内容やBOMステータスに変化がないことを確認します。



4. **複数ファイルの処理と再帰的読み込み**

1. **準備**:

1. 以下のようなディレクトリ構造とファイルを作成します。

```plaintext
test_dir/
├── file1_bom.txt (BOMあり)
├── file2_no_bom.txt (BOMなし)
└── subdir/
    ├── file3_bom.txt (BOMあり)
    └── file4_no_bom.txt (BOMなし)
```





2. **手順**:

1. ツールで`test_dir`を選択します。
2. 「ファイルをスキャン」をクリックし、4つのファイルすべてが検出され、それぞれのBOMステータスが正しく表示されることを確認します。
3. 「BOMを削除」を選択し、「実行」します。



3. **確認**: すべてのBOM付きファイルからBOMが削除され、BOMなしファイルは変更されていないことを確認します。



5. **バイナリファイルや非テキストファイルの扱い**

1. **準備**:

1. 画像ファイル（例: `image.png`）やPDFファイル（例: `document.pdf`）をテストディレクトリに配置します。



2. **手順**:

1. ツールでファイルを含むディレクトリを選択します。
2. 「ファイルをスキャン」をクリックします。



3. **確認**: これらのファイルがスキャン結果に表示されるか、または適切にスキップされるかを確認します（現在の実装では、`TextDecoder`でデコードを試みるため、テキストとして扱われますが、BOM検出は正しく行われるはずです）。バイナリファイルはBOMを持たないため、「BOMなし」と表示され、処理しても内容が壊れないことを確認します